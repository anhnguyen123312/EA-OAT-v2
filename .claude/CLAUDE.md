# EA-OAT-v2: Multi-Agent Architecture for MT5 EA Development

## Project Overview
6-agent team swarm system for developing and optimizing MetaTrader 5 Expert Advisors.
Focus: Price Action + Support/Resistance strategies for Gold (XAUUSD) and Oil (CL) commodity futures.
Runtime: Claude Code Agent Teams (experimental).

## Agents

| Agent | Role | Phase |
|-------|------|-------|
| **Researcher** | Deep research PA+S/R methods for Gold/Oil | Phase 1: Research |
| **PM** | Break strategy into detailed implementation plan | Phase 1: Planning |
| **Technical Analyst** | Convert PM plan â†’ MQL5 technical specs | Phase 1: Specs |
| **Reviewer** | Quality gate - review ALL Phase 1 outputs | Gate |
| **Coder** | Implement EA, compile, run backtest | Phase 2: Execute |
| **Backtester** | Trade-by-trade analysis, session/correlation insights | Phase 2: Analyze |
| **Em** (Lead) | Coordinate team, iteration decisions, root cause | Coordinator |

## Pipeline Flow

```
Researcher â†’ PM â†’ Technical â†’ REVIEWER (gate) â†’ Coder â†’ Backtester â†’ Lead
                                                                        â†“
                                                              Targets met? â†’ DONE
                                                              Targets miss? â†’ New iteration
                                                                               â†“
                                                              Lead creates tasks â†’ LOOP BACK
```

## Targets (ALL must be met simultaneously)
- Win Rate: >= 90%
- Risk:Reward: >= 1:2
- Trades/day: >= 10
- Max Drawdown: < 10%

## Directory Structure
- `brain/` - Shared knowledge (strategy research, plans, decisions, review log, optimization log)
- `experience/` - Technical knowledge (compile issues, MQL5 patterns, backtest journal, Wine quirks)
- `code/experts/` - EA source files (.mq5)
- `code/include/` - Shared MQL5 libraries (.mqh)
- `code/indicators/` - Custom indicators
- `tasks/` - Task files (Technical Analyst writes CODER_TASK, Lead writes OPTIMIZATION_TASK)
- `results/` - Backtest CSV outputs + trade journals + logs
- `config/` - MT5 backtest configurations
- `skills/` - Agent skill definitions (1 per agent)
- `docs/plans/` - Architecture and design documents

## Slash Commands
- `/em [instruction]` - Run as Em / Team Lead (coordinator)
- `/researcher [instruction]` - Run as Researcher (PA+S/R methods)
- `/pm [instruction]` - Run as PM (strategy breakdown)
- `/technical [instruction]` - Run as Technical Analyst (MQL5 specs)
- `/reviewer [instruction]` - Run as Reviewer (quality gate)
- `/coder [instruction]` - Run as Coder (implement + compile)
- `/backtester [instruction]` - Run as Backtester (trade-by-trade analysis)

## Tech Stack
- MQL5 (MetaTrader Query Language 5)
- MetaTrader 5 on macOS via Wine
- Git for coordination between agents
- Claude Code Agent Teams for swarm orchestration

## Key Rules
- ALL agents MUST read brain/ and experience/ before any work
- ALL agents MUST git pull before, git push after
- Reviewer MUST approve before Coder starts (quality gate)
- Coder implements from approved CODER_TASK.md only
- Every EA MUST include OnTester() with CSV export
- Backtester classifies every trade: CORRECT_WIN, CORRECT_LOSS, FALSE_SIGNAL, BAD_TIMING, MISSED_EXIT
- Config: `Expert=EAName` (name only, no path prefix)
- Max 10 iterations per strategy. Pivot after 3 without improvement.


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Feb 16, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #4254 | 11:47 PM | ðŸ”µ | EA-OAT-v2 Project Complete Architecture Analysis | ~289 |
| #4244 | 11:24 PM | âœ… | Extended Permissions for Coder Workflow Operations | ~346 |
</claude-mem-context>